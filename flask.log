nohup: ignoring input
 * Serving Flask app 'index.py' (lazy loading)
 * Environment: production
   WARNING: This is a development server. Do not use it in a production deployment.
   Use a production WSGI server instead.
 * Debug mode: off
[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:4500
 * Running on http://138.246.225.198:4500
[33mPress CTRL+C to quit[0m
10.157.62.172 - - [06/May/2024 14:52:07] "GET /get_clients?user_id=9433ea5c-a8e1-4f1f-b1ff-dcf2594192d0 HTTP/1.1" 200 -
10.157.62.172 - - [06/May/2024 14:52:08] "GET /node-red?email=testuser46@tum.de HTTP/1.1" 200 -
10.157.62.172 - - [06/May/2024 14:52:08] "GET /get_clients?user_id=9433ea5c-a8e1-4f1f-b1ff-dcf2594192d0 HTTP/1.1" 200 -
10.157.62.172 - - [06/May/2024 14:52:08] "GET /node-red?email=testuser46@tum.de HTTP/1.1" 200 -
10.157.62.172 - - [06/May/2024 14:52:11] "GET /node-red?email=testuser46@tum.de HTTP/1.1" 200 -
10.157.62.172 - - [06/May/2024 14:52:11] "GET /node-red?email=testuser46@tum.de HTTP/1.1" 200 -
10.157.62.172 - - [06/May/2024 14:52:11] "GET /frost-server?email=testuser46@tum.de HTTP/1.1" 200 -
10.157.62.172 - - [06/May/2024 14:52:12] "GET /node-red?email=testuser46@tum.de HTTP/1.1" 200 -
10.157.62.172 - - [06/May/2024 14:52:12] "GET /get_clients?user_id=9433ea5c-a8e1-4f1f-b1ff-dcf2594192d0 HTTP/1.1" 200 -
10.157.62.172 - - [06/May/2024 14:52:12] "GET /node-red?email=testuser46@tum.de HTTP/1.1" 200 -
10.157.62.172 - - [06/May/2024 14:54:55] "GET /get_clients?user_id=9433ea5c-a8e1-4f1f-b1ff-dcf2594192d0 HTTP/1.1" 200 -
10.157.62.172 - - [06/May/2024 14:54:55] "GET /frost-server?email=testuser46@tum.de HTTP/1.1" 200 -
10.157.62.172 - - [06/May/2024 14:54:55] "GET /node-red?email=testuser46@tum.de HTTP/1.1" 200 -
10.157.62.172 - - [06/May/2024 14:54:55] "GET /node-red?email=testuser46@tum.de HTTP/1.1" 200 -
10.157.62.172 - - [06/May/2024 14:54:55] "GET /node-red?email=testuser46@tum.de HTTP/1.1" 200 -
10.157.62.172 - - [06/May/2024 14:54:55] "GET /get_clients?user_id=9433ea5c-a8e1-4f1f-b1ff-dcf2594192d0 HTTP/1.1" 200 -
10.157.62.172 - - [06/May/2024 14:54:55] "GET /node-red?email=testuser46@tum.de HTTP/1.1" 200 -
10.157.62.172 - - [06/May/2024 15:19:41] "OPTIONS /register HTTP/1.1" 200 -
10.157.62.172 - - [06/May/2024 15:19:43] "POST /register HTTP/1.1" 200 -
37dd4ca7-b8c9-4f69-bcd3-ae31daaad4ea
{'group_name': ['testuser46@tum.de'], 'group_type': ['individual']}
[{'id': '37dd4ca7-b8c9-4f69-bcd3-ae31daaad4ea', 'attributes': {'group_name': ['testuser46@tum.de'], 'group_type': ['individual']}}]
37dd4ca7-b8c9-4f69-bcd3-ae31daaad4ea
{'group_name': ['testuser46@tum.de'], 'group_type': ['individual']}
[{'id': '37dd4ca7-b8c9-4f69-bcd3-ae31daaad4ea', 'attributes': {'group_name': ['testuser46@tum.de'], 'group_type': ['individual']}}]
37dd4ca7-b8c9-4f69-bcd3-ae31daaad4ea
{'group_name': ['testuser46@tum.de'], 'group_type': ['individual']}
[{'id': '37dd4ca7-b8c9-4f69-bcd3-ae31daaad4ea', 'attributes': {'group_name': ['testuser46@tum.de'], 'group_type': ['individual']}}]
37dd4ca7-b8c9-4f69-bcd3-ae31daaad4ea
{'group_name': ['testuser46@tum.de'], 'group_type': ['individual']}
[{'id': '37dd4ca7-b8c9-4f69-bcd3-ae31daaad4ea', 'attributes': {'group_name': ['testuser46@tum.de'], 'group_type': ['individual']}}]
37dd4ca7-b8c9-4f69-bcd3-ae31daaad4ea
{'group_name': ['testuser46@tum.de'], 'group_type': ['individual']}
[{'id': '37dd4ca7-b8c9-4f69-bcd3-ae31daaad4ea', 'attributes': {'group_name': ['testuser46@tum.de'], 'group_type': ['individual']}}]
SELECT * FROM user_registered WHERE token = %s and ((isVerified = 0 AND isCompleted = 0) OR (isVerified = 1 AND isCompleted = 0))
((48, 'testing', 'dev', 'testhef@tum.de', 'a91177b8-60f8-454c-9666-f08ab8c80a90', 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, datetime.datetime(2024, 5, 6, 14, 19, 41), None),)
UPDATE user_registered SET isVerified = 1 WHERE token = %s;
Step1 before  {KEYCLOAK_SERVER_URL}/realms/{KEYCLOAK_REALM}/protocol/openid-connect/token
token_request {'access_token': 'eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJITUQ1YWNNak01c25QS2lYU0lhZnROOFA4NWZmUFdQUVhLVHI2QkRkcDFvIn0.eyJleHAiOjE3MTUwMDUxOTUsImlhdCI6MTcxNTAwMTU5NSwianRpIjoiMDM1MWFmMTUtZDViZS00YjcxLWEyYTMtMjI1ZTU1MjNhYWJkIiwiaXNzIjoiaHR0cDovL3R1emVoZXotZGV2LnNydi5td24uZGU6ODA4MC9yZWFsbXMvbWFzdGVyIiwiYXVkIjpbIm1hc3Rlci1yZWFsbSIsImFjY291bnQiXSwic3ViIjoiMDkxZmZkZWEtOTVlYi00ZDNjLWI5MzItNGQ4OTQ2ODBlYTExIiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiaGVmU2Vuc29ySHViX2RldmVsb3BtZW50Iiwic2Vzc2lvbl9zdGF0ZSI6IjM3ZTA1MmJhLTc5YTMtNGQ2Yy04ZTc1LWU0YzMzMTExODRmNSIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiKiJdLCJyZWFsbV9hY2Nlc3MiOnsicm9sZXMiOlsiY3JlYXRlLXJlYWxtIiwiZGVmYXVsdC1yb2xlcy1tYXN0ZXIiLCJvZmZsaW5lX2FjY2VzcyIsImFkbWluIiwidW1hX2F1dGhvcml6YXRpb24iXX0sInJlc291cmNlX2FjY2VzcyI6eyJtYXN0ZXItcmVhbG0iOnsicm9sZXMiOlsidmlldy1pZGVudGl0eS1wcm92aWRlcnMiLCJ2aWV3LXJlYWxtIiwibWFuYWdlLWlkZW50aXR5LXByb3ZpZGVycyIsImltcGVyc29uYXRpb24iLCJjcmVhdGUtY2xpZW50IiwibWFuYWdlLXVzZXJzIiwicXVlcnktcmVhbG1zIiwidmlldy1hdXRob3JpemF0aW9uIiwicXVlcnktY2xpZW50cyIsInF1ZXJ5LXVzZXJzIiwibWFuYWdlLWV2ZW50cyIsIm1hbmFnZS1yZWFsbSIsInZpZXctZXZlbnRzIiwidmlldy11c2VycyIsInZpZXctY2xpZW50cyIsIm1hbmFnZS1hdXRob3JpemF0aW9uIiwibWFuYWdlLWNsaWVudHMiLCJxdWVyeS1ncm91cHMiXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyIsInZpZXctcHJvZmlsZSJdfX0sInNjb3BlIjoiZW1haWwgcHJvZmlsZSIsInNpZCI6IjM3ZTA1MmJhLTc5YTMtNGQ2Yy04ZTc1LWU0YzMzMTExODRmNSIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwicHJlZmVycmVkX3VzZXJuYW1lIjoiYWRtaW4ifQ.EY0BkCI6YPDmT8Zn68TWXU3UWzvI-x_BVmHKWOrFzOBkU4epfwrCvO1dGf1fS4XSjlkA5rbInpkvUivQbUlSgI568du-QbaedDTEFDiR8Uzxld02iZJPleLVTRj1CzzO64VqyPUIKEpBvW0UwTghMz9egnDB2ZTf4i6VZyFwfYiCNowj_E6Rd4vbjq9xJLj5hL28-8lbYMCgDMEIrPyczZ9N8Molr8LreV5ah_w2ffnbYzPdKZN6vkGaHaQx4BX3Nn6R1WFEBpGYNgB25gHoDKM56Ujq3kVPtUJrPI3csu9fRHUxfp31v35qh-NlUsdErR-uJKpFsi8DArAW3I6S-Q', 'expires_in': 3600, 'refresh_expires_in': 1800, 'refresh_token': 'eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJhMWVmN2JjNC1hNGIzLTQ1MzQtYWMxZS1lODk0ZjJhOGQ0MzIifQ.eyJleHAiOjE3MTUwMDMzOTUsImlhdCI6MTcxNTAwMTU5NSwianRpIjoiNTEyMDMyNTMtM2ZmZC00MDUwLTlhYmUtMmE5YTBlOTc2ZmIzIiwiaXNzIjoiaHR0cDovL3R1emVoZXotZGV2LnNydi5td24uZGU6ODA4MC9yZWFsbXMvbWFzdGVyIiwiYXVkIjoiaHR0cDovL3R1emVoZXotZGV2LnNydi5td24uZGU6ODA4MC9yZWFsbXMvbWFzdGVyIiwic3ViIjoiMDkxZmZkZWEtOTVlYi00ZDNjLWI5MzItNGQ4OTQ2ODBlYTExIiwidHlwIjoiUmVmcmVzaCIsImF6cCI6ImhlZlNlbnNvckh1Yl9kZXZlbG9wbWVudCIsInNlc3Npb25fc3RhdGUiOiIzN2UwNTJiYS03OWEzLTRkNmMtOGU3NS1lNGMzMzExMTg0ZjUiLCJzY29wZSI6ImVtYWlsIHByb2ZpbGUiLCJzaWQiOiIzN2UwNTJiYS03OWEzLTRkNmMtOGU3NS1lNGMzMzExMTg0ZjUifQ.0xflYi8HndyCajtT9Ph_bUMmd0J_R0vfVxkz6Ip6Pvo', 'token_type': 'Bearer', 'not-before-policy': 0, 'session_state': '37e052ba-79a3-4d6c-8e75-e4c3311184f5', 'scope': 'email profile'}
step2
UPDATE user_registered SET keycloak_user_creation = 1 WHERE token = %s;
step3
SELECT id FROM user_registered where email = %s;
User ID: 48
Data inserted successfully into service table for user ID: 48
43
TEST1
True
TEST2
TEST3
TEST5
TEST6
TEST7
TEST10
6043
1933
UPDATE user_registered SET keycloak_generate_client = 1 WHERE token = %s;
UPDATE user_registered SET keycloak_create_roles_for_client = 1 WHERE token = %s;
UPDATE user_registered SET keycloak_role_mapping = 1 WHERE token = %s;
*****GROUP NAME ******
16c255c5aaa34db689e69e09f006c24f
*****GROUP NAME ******
UPDATE user_registered SET group_creation = 1 WHERE token = %s;
************
60509eb7-37e3-4072-893c-8a1c2a7186b0
************
User added to group successfully.
UPDATE user_registered SET group_assign_user_to_group = 1 WHERE token = %s;
UPDATE user_registered SET group_frost_client_role_mapping = 1 WHERE token = %s;
UPDATE user_registered SET yml_genereration = 1 WHERE token = %s;

    version: '3'
    services:
      web:
        image: fraunhoferiosb/frost-server:2.0
        container_name: frost_6043
        environment:
          - serviceRootUrl=http://tuzehez-dev.srv.mwn.de:6043/FROST-Server
          - http_cors_enable=true
          - http_cors_allowed.origins=*
          - persistence_db_driver=org.postgresql.Driver
          - persistence_db_url=jdbc:postgresql://database:5432/sensorthings
          - persistence_db_username=sensorthings
          - persistence_db_password=ChangeMe
          - persistence_autoUpdateDatabase=true
          - persistence_alwaysOrderbyId=true
          - auth.provider=de.fraunhofer.iosb.ilt.frostserver.auth.keycloak.KeycloakAuthProvider
          - auth.keycloakConfigUrl=http://tuzehez-dev.srv.mwn.de:8080/realms/master/clients-registrations/install/frost_6043
          - auth.keycloakConfigSecret=HuWyh5o81PH7bkfWjr1p1L1ppXPtvHDw
        ports:
          - 6043:8080
          - 1933:1883
        depends_on:
          - database
        restart: always
      database:
        image: postgis/postgis:11-2.5-alpine
        container_name: frost_6043_db
        environment:
          - POSTGRES_DB=sensorthings
          - POSTGRES_USER=sensorthings
          - POSTGRES_PASSWORD=ChangeMe
        volumes:
          - postgis_volume:/var/lib/postgresql/data
        restart: always
    volumes:
        postgis_volume:
    
frost_6043
Creating network "frost_6043_default" with the default driver
Creating volume "frost_6043_postgis_volume" with default driver
Creating frost_6043_db ... 
[1A[2KCreating frost_6043_db ... [32mdone[0m[1BCreating frost_6043    ... 
[1A[2KCreating frost_6043    ... [32mdone[0m[1BCompletedProcess(args=['docker-compose', '-p', 'frost_6043', '-f', 'yml_files/frost_6043.yml', 'up', '-d'], returncode=0)
UPDATE user_registered SET frost_yml_execution = 1 WHERE token = %s;
CompletedProcess(args='docker run -d --restart always --init  -p 20026:1880 -v node_red_storage_43:/data --name node_red_43 nodered/node-red', returncode=0, stdout=b'7acd08cc2f81f04bd3ead2838bf4d1d4270fc290fc6f1893f05abf626f0dc431\n', stderr=b'')
UPDATE user_registered SET node_red_command_execution = 1 WHERE token = %s;
node_red_43WASS 
7acd08cc2f81 WASSS 
7acd08cc2f81

added 5 packages, and audited 309 packages in 3s

47 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
npm notice 
npm notice New major version of npm available! 8.19.4 -> 10.7.0
npm notice Changelog: <https://github.com/npm/cli/releases/tag/v10.7.0>
npm notice Run `npm install -g npm@10.7.0` to update!
npm notice 
CompletedProcess(args=['docker', 'exec', '7acd08cc2f81', 'bash', '-c', 'cd /usr/src/node-red/node_modules && npm install passport-keycloak-oauth2-oidc'], returncode=0)
CompletedProcess(args=['docker', 'exec', '7acd08cc2f81', 'bash', '-c', 'cd /usr/src/node-red/node_modules && npm install passport-keycloak-oauth2-oidc'], returncode=0)
UPDATE user_registered SET node_red_install_libaries = 1 WHERE token = %s;
http://tuzehez-dev.srv.mwn.de 20026 DOMAIN PRINT
UPDATE user_registered SET node_red_keycloak_generate_new_client = 1 WHERE token = %s;
UPDATE user_registered SET node_red_keycloak_generate_roles = 1 WHERE token = %s;
UPDATE user_registered SET node_red_keycloak_role_mapping = 1 WHERE token = %s;
UPDATE user_registered SET group_node_red_client_role_mapping = 1 WHERE token = %s;
IJOlYlDMQcCxOB8f0CKlUrqrQwWiWkrG SECRET OF NODE RED
eb0734d9-595a-4cc8-92f6-785cb111f694 ID OF RED NODE CLIENT
node_red_43 TEST 
node_red_43 IJOlYlDMQcCxOB8f0CKlUrqrQwWiWkrG http://tuzehez-dev.srv.mwn.de:20026/auth/strategy/callback http://tuzehez-dev.srv.mwn.de:8080 master testhef@tum.de http://tuzehez-dev.srv.mwn.de
UPDATE user_registered SET node_red_replace_settings = 1 WHERE token = %s;
7acd08cc2f81
CompletedProcess(args='docker restart 7acd08cc2f81', returncode=0)
UPDATE user_registered SET node_red_restart_container = 1 WHERE token = %s;
UPDATE user_registered SET isCompleted = 1, completedAt = %s WHERE token = %s;
10.157.62.172 - - [06/May/2024 15:20:06] "GET /validate?token=a91177b8-60f8-454c-9666-f08ab8c80a90 HTTP/1.1" 200 -
10.157.62.172 - - [06/May/2024 15:20:06] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
10.157.62.172 - - [06/May/2024 15:20:50] "GET /node-red?email=testhef@tum.de HTTP/1.1" 200 -
10.157.62.172 - - [06/May/2024 15:20:50] "GET /get_clients?user_id=12492f9b-3cbe-44a4-90a5-f62d9fa159a3 HTTP/1.1" 200 -
10.157.62.172 - - [06/May/2024 15:20:50] "GET /node-red?email=testhef@tum.de HTTP/1.1" 200 -
10.157.62.172 - - [06/May/2024 15:20:50] "GET /get_clients?user_id=12492f9b-3cbe-44a4-90a5-f62d9fa159a3 HTTP/1.1" 200 -
10.157.62.172 - - [06/May/2024 15:20:53] "GET /node-red?email=testhef@tum.de HTTP/1.1" 200 -
10.157.62.172 - - [06/May/2024 15:20:54] "GET /frost-server?email=testhef@tum.de HTTP/1.1" 200 -
10.157.62.172 - - [06/May/2024 15:20:54] "GET /node-red?email=testhef@tum.de HTTP/1.1" 200 -
10.157.62.172 - - [06/May/2024 15:20:55] "GET /node-red?email=testhef@tum.de HTTP/1.1" 200 -
10.157.62.172 - - [06/May/2024 15:20:55] "GET /node-red?email=testhef@tum.de HTTP/1.1" 200 -
10.157.62.172 - - [06/May/2024 15:20:55] "GET /get_clients?user_id=12492f9b-3cbe-44a4-90a5-f62d9fa159a3 HTTP/1.1" 200 -
167.248.133.178 - - [06/May/2024 21:31:54] code 400, message Bad request version ('À\x14À')
167.248.133.178 - - [06/May/2024 21:31:54] "[35m[1m î  ê­¦¿°÷ÖoJÈ z¹àÏ ýx80»Mæ]ã$Ú "%7 J³ºs;<{´Åì¹Ïd)÷{ÃspwD¯ü &Ì¨Ì©À/À0À+À,ÀÀ	ÀÀ[0m" HTTPStatus.BAD_REQUEST -
167.248.133.178 - - [06/May/2024 21:31:57] "[33mGET / HTTP/1.1[0m" 404 -
167.248.133.178 - - [06/May/2024 21:32:01] "[33mGET / HTTP/1.1[0m" 404 -
167.248.133.178 - - [06/May/2024 21:32:01] code 505, message Invalid HTTP version (2.0)
167.248.133.178 - - [06/May/2024 21:32:01] "[35m[1mPRI * HTTP/2.0[0m" HTTPStatus.HTTP_VERSION_NOT_SUPPORTED -
167.248.133.42 - - [07/May/2024 10:04:27] code 400, message Bad request syntax ('\x16\x03\x01\x00î\x01\x00\x00ê\x03\x03Æ\x99Ûh;XîÂ\x82Ï¶!b')
167.248.133.42 - - [07/May/2024 10:04:27] "[35m[1m î  êÆÛh;XîÂÏ¶!b[0m" HTTPStatus.BAD_REQUEST -
167.248.133.42 - - [07/May/2024 10:04:30] "[33mGET / HTTP/1.1[0m" 404 -
167.248.133.42 - - [07/May/2024 10:04:34] "[33mGET / HTTP/1.1[0m" 404 -
167.248.133.42 - - [07/May/2024 10:04:34] code 505, message Invalid HTTP version (2.0)
167.248.133.42 - - [07/May/2024 10:04:34] "[35m[1mPRI * HTTP/2.0[0m" HTTPStatus.HTTP_VERSION_NOT_SUPPORTED -
199.45.154.19 - - [07/May/2024 11:46:47] code 400, message Bad request version ('À\x14À')
199.45.154.19 - - [07/May/2024 11:46:47] "[35m[1m î  ê ¼ÔGn>Ñ EÔD`>gÕÇ5öçOÍ' õ½ê»/jÏ¨»¸³ ç¿®¾asàê±TE¸cR_Ö> &Ì¨Ì©À/À0À+À,ÀÀ	ÀÀ[0m" HTTPStatus.BAD_REQUEST -
199.45.154.19 - - [07/May/2024 11:46:51] "[33mGET / HTTP/1.1[0m" 404 -
199.45.154.19 - - [07/May/2024 11:46:55] "[33mGET / HTTP/1.1[0m" 404 -
199.45.154.19 - - [07/May/2024 11:46:55] code 505, message Invalid HTTP version (2.0)
199.45.154.19 - - [07/May/2024 11:46:55] "[35m[1mPRI * HTTP/2.0[0m" HTTPStatus.HTTP_VERSION_NOT_SUPPORTED -
141.24.51.188 - - [07/May/2024 12:05:27] "[33mGET / HTTP/1.1[0m" 404 -
141.24.51.188 - - [07/May/2024 12:05:27] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
194.165.16.72 - - [07/May/2024 12:41:14] code 400, message Bad HTTP/0.9 request type ('\x03\x00\x00/*à\x00\x00\x00\x00\x00Cookie:')
194.165.16.72 - - [07/May/2024 12:41:14] "[35m[1m  /*à     Cookie: mstshash=Administr[0m" HTTPStatus.BAD_REQUEST -
